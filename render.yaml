services:
  - type: web
    name: frontend
    env: docker
    plan: free
    buildCommand: "npm install node styled-components && npm run build"
    startCommand: "npm start"
    dockerfilePath: ./reactvite-app
    envVars:
      - key: NODE_ENV
        value: production
    ports:
      - 8080

  - type: web
    name: backend
    env: docker
    plan: free
    buildCommand: "./mvnw clean package"
    startCommand: "java -jar target/myapp.jar"
    dockerfilePath: ./java/apiecomerce
    envVars:
      - key: DATABASE_URL
        value: postgres://user:password@host:port/dbname
    ports:
      - 3000
